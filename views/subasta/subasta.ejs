<!DOCTYPE html>
<html lang="en">
<head>
  <base href="/public">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subasta</title>
  <link rel="stylesheet" href="/subasta/css/subasta.css">
  <link rel="stylesheet" href="/templates/css/navbarFeatureCSS.css">
</head>
<body>
<header>
  <nav>
    <%- include('../../templates/navbarEcommerce'); %>
  </nav>
</header>
<main class="container_general">

  <% // Mapeo de subtipos a imágenes y tipo de icono
  const subtipoImagen = {
    "Armas": "/inventario/imagenes/espadas.png",
    "Tanque": "/inventario/imagenes/blindaje.png",
    "Fuego": "/inventario/imagenes/Fuego.png",
    "Hielo": "/inventario/imagenes/hielo.png",
    "Veneno": "/inventario/imagenes/veneno.png",
    "Machete": "/inventario/imagenes/machete.png"
  };

  for (let i = 0; i < datos.length; i++) {
    const carta = datos[i];
    const imagen = subtipoImagen[carta.Subtype];
    const pujas = carta.PUJAS;
    %>

<!-- Informacion y foto de la carta -->
  <div class="info_carta">
    <img src="<%= carta.imagePath %>" alt="">
    <p class="nombre_carta"><b><%= carta.Name %></b></p>
   <ul class="detalles_card">
    <li class="tipo"><b>Tipo carta:</b>&nbsp <%= carta.Type %></li>
    <li class="description"><b>Descripción:</b>&nbsp <%= carta.Description %></li>
   </ul>
  </div>
   <!-- Informacion de la subasta -->
<div class="subasta_info">
<h2 class="subasta_info_title">Información de la subasta</h2>
<div class="valor_base_subasta">
  <p><b>Valor base</b></p>
  <p><b>Créditos:</b><%= carta.creditos_min %></p>
  <p><b>Cartas:</b></p>
  <li><%= carta.cartas_min %></li>
</div>

<div class="valor_maximo_subasta">
  <p><b>Valor Máximo / Compra Inmediata</b></p>
  <p><b>Créditos:</b> <%= carta.creditos_max %></p>
  <p><b>Cartas:</b></p>
  <ul class="cartas_v_max">
    <li><%= carta.cartas_max %></li>
  </ul>
</div>
<div class="fechas_subasta">
  <p><b>Fecha de Inicio:</b> <%= carta.fecha_inicio%> </p>
  <p><b>Fecha Fin:</b> <%= carta.fecha_fin %></p>
  <p><b>Duración de la subasta:</b> <%= carta.tiempo_inicio %></p>
</div>
<div class="tiempo_restante">
  <p><b>Tiempo Restante: &nbsp 00:24:00</b></p>
</div>
</div>

<!-- Ofertas -->
<div class="ofertas">
<h2>Ofertas</h2>
<div class="ofertas_jugadores_container">
  <div class="oferta_players">
    <p class="player_name"><b>@ShadowStriker</b></p>
    <p class="credits_player">Créditos: <%= pujas[0].creditos %></p>
    <p class="cards_player">Cartas: <%= carta.Name %></p>
  </div>
</div>

<div class="ofertas_jugadores_container">
  <div class="oferta_players">
    <p class="player_name"><b>@ShadowStriker</b></p>
    <p class="credits_player">Créditos: <%= pujas[1].creditos %></p>
    <p class="cards_player">Cartas: <%= carta.Name %></p>
  </div>
</div>
<div class="ofertas_jugadores_container">
  <div class="oferta_players">
    <p class="player_name"><b>@ShadowStriker</b></p>
    <p class="credits_player">Créditos: <%= pujas[2].creditos %></p>
    <p class="cards_player">Cartas: <%= carta.Name %></p>
  </div>
</div>

<div class="buttons">
  <button class="pujar" onclick="abrirPujar()"><b>Pujar</b></button>
  <button class="compra_rapida" onclick="abrirCompraRapida()" ><b>Compra rápida</b></button>
</div>
</div>
<!-- Emergente Puja-->
<div class="puja_container" >
  <label for="cantidad_creditos" class="c_creditos">
    Cantidad de créditos
  </label>
  <input type="number" name="cantidad_creditos" id="cantidad_creditos" oninput="validarNumero(this)">

  <label for="cards_puja">
    Cartas
  </label>
  <select name="cards_puja" id="cards_p">
    <option value="<%= carta.Name %>"><%= carta.Name %></option>
    <option value="">2</option>
    <option value="">3</option>
  </select>
  <div class="buttons">
    <button class="pujar_b">Realizar puja</button>
    <button class="Cancelar" onclick="cerrarEmer()">Cancelar</button>
  </div>
</div>
<!--Compra rápida emergente-->
<div class="compra_rapida_container">
  <label for="cantidad_creditos" class="c_creditos">
    Cantidad de créditos
  </label>
  <input type="number" name="cantidad_creditos" oninput="validarNumero(this)" id="cantidad_creditos">

  <label for="cards">
    Cartas
  </label>
  <div class="cards_container">
    <p><%= carta.Name %></p>
  </div>
  <div class="buttons">
    <button class="comprar">Comprar</button>
    <button class="cancelar" onclick="cerrarEmer()">Cancelar</button>
  </div>
</div>
<% } %>
</main>
<script src="../../public/subasta/js/emergentes.js"></script>
</body>
</html>
