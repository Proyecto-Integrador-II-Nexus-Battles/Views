<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/carro_compras/css/style.css">
  <link rel="icon" href="/img/icon.png" type="image/x-icon">
  <title>Carro Compras</title>
</head>

<body>
  <header>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        var token = localStorage.getItem('token');

        if (token !== null) {
          document.querySelector('.login_btn').textContent = 'Cerrar Sesión';
          document.querySelector('.login_btn').addEventListener('click', function() {
            localStorage.removeItem('token');
            window.location.reload(true);
          });
        } else {
          console.log('Not logged in');
        }
      });
    </script>
    <a href="/">
      <img src="/vitrina_productos/img/logo.png" class="logo_img" alt="">

    </a><!-- Barra de navegación -->
    <img src="/carro_compras/img/hamburguer_icon.svg" class="abrir-btn" alt="">
    <nav class="" id="navbar">
      <ul class="opciones">
        <li><a href="#">Mi cuenta</a></li>
        <li><a href="#">Mi banco</a></li>
        <li><a href="/subasta">Subasta</a></li>
        <li><a href="/jugarOnline">Jugar online</a></li>
        <li><a href="/torneo">Torneo</a></li>
        <li><a id="mostrar-resumen-flotante" href="#">Resumen Flotante</a></li>
        <li><a onclick="redirectListaDeseos()" id="lista-deseos">Lista Deseos</a></li>
        <li><a href="/login"><button class="login_btn">Login</button></a></li>
      </ul>
    </nav>
  </header>
  <section>
    <div>
      <button class="regresar">
        <img class="flecha" src="carro_compras/img/flechablanca.png">
      </button>
    </div>
    <div class="carrito">
      <h1 class="titulo">Tu carro de compra</h1>
      <hr class="linea">
    </div>
  </section>
  <main>
    <div class="container">
      <%- include('../../templates/cartas_carrito'); %>
      </div>
      <div class="paginas">
        <ul class="listPage">
          <li class="active">1</li>
          <li class="numeros">2</li>
          <li class="numeros">3</li>
        </ul>
      </div>
    </div>
    <div class="resumen">
      <div class="compra">
        <h2>Resumen de compra</h2>
        <hr class="lineados">
      </div>
      <div class="productos">
        <div class="productosp">
          <p>Productos:</p>
          <p class="numproductos"><%= cantidadtotal %></p>
        </div>
        <div class="totalb">
          <p>Total bruto:</p>
          <p class="numtotalb"><%= totalBruto %></p>
        </div>
        <div class="iva">
          <p>Impuesto(IVA):</p>
          <p class="numiva">19%</p>
        </div>
        <hr class="lineatres">
        <div class="total">
          <h3>Total</h3>
          <p class="numtotal"><%= totalNeto %></p>
        </div>
      </div>

      <div class="pedido">
        <button class="realizar" id="checkout"> Realizar pedido</button>
        <p class="añadir">¿Quieres añadir más productos?</p>

        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

      </div>
    </div>
    <div id="resumen-flotante" class="resumen-flotante-oculto">
      <h2>Resumen de compra</h2>
      <hr class="lineados">
      <div class="resumen-flotante-contenido">
        <div class="comprados">
          <% for (let i = 0; i < info.length; i++) { 
                          const carta = info[i];
                          %>
          <div class="guardar_cartas">
            <div class="imagen_cartados">
              <img src="<%= carta.imagePath %>" class="personajedos" />
            </div>
            <div class="informacion_cartados">
              <p><%= carta.Name %></p>
            </div>
          </div>
          <% } %>
        </div>
      </div>
      <div class="productosdos">
        <div class="productosp">
          <p>Productos:</p>
          <p class="numproductos"><%= cantidadtotal %></p>
        </div>
        <div class="totalb">
          <p>Total bruto:</p>
          <p class="numtotalb"><%= totalBruto %></p>
        </div>
        <div class="iva">
          <p>Impuesto(IVA):</p>
          <p class="numiva">19%</p>
        </div>
        <hr class="lineatres">
        <div class="total">
          <h3>Total</h3>
          <p class="numtotal"><%= totalNeto %></p>
        </div>
      </div>
      <div class="pedidodos">
        <button class="realizardos" id="checkout"> Realizar pedido</button>
      </div>
      <div class="ircarrito">
        <button class="ircarritodos" id="checkout"> Ir al carrito</button>
      </div>
      <div class="guardar">
        <p>^</p>
      </div>
    </div>
    </div>
  </main>
  <script src="/js/redirects.js"></script>
  <script src="/carro_compras/js/navbar.js"></script>
  <script src="/carro_compras/js/paginacion.js"></script>
  <script src="/carro_compras/js/resumen_flotante.js"></script>
  <script src="/carro_compras/js/cantidad.js"></script>
  <script src="/carro_compras/js/eliminar.js"></script>
  <script src="/carro_compras/js/paypal.js"></script>
</body>

</html>