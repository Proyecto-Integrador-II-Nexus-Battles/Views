<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- Header -->
  <header>
    <section class="nav">
      <img src="img/logo.png" class="logo_img" alt="">
      <!-- Barra de navegación -->
      <img src="img/hamburguesa_icon.svg" class="abrir-btn" alt="">
      <nav class="" id="navbar">
        <ul class="opciones">
          <li><a href="#"">Mi cuenta</a></li>
          <li><a href="#">Mi banco</a></li>
          <li><a href="#">Subasta</a></li>
          <li><a href="#" >Jugar online</a></li>
          <li><a href="#">Torneo</a></li>
          <li><a href="#">Resumen Flotante</a></li>
          <li><a href="#">Lista Deseos</a></li>
          <li class="cerrar-sesion"><a href="#"><button id="login_btn">Iniciar Sesion</button></a></li>
        </ul>
      </nav>
    </section>
  </header>
  <!-- Vitrina de productos -->
  <main>    
    
<!-- Cartas -->

  <div class="container_general">
    <h3 class="agregar">Mi Lista de Deseos</h3>
    <div class="list">
      
      <% products.forEach(function(item) { %>
        <div class="card">
          <div class="imagen_carta">
            <img src="img/carta.png" class="personaje" />
          </div>
          <div class="informacion_carta">
            <div id="nombre">
              <p> <%= item.nombre %> </p>
              <img src="img/espadas.png" class="heroe" />
            </div>
            <p>Poder: </p>
            <p>Vida: </p>
            <p>Defensa: </p>
            <p>Ataque: </p>
            <p>Daño: </p>
            <div class="botones">
              <div class="modificar">
                <button onclick='eliminar(<%= item.id %>)'>Eliminar</button>
                <button onclick="">Mover al carrito</button>
              </div>
            </div>
          </div>
        </div>
      <% }); %>
      </div>
      <div class="paginas">
        <ul class="listPage">
            <li class="active">1</li>
            <li>2</li>
            <li>3</li>
        </ul>
</div>
  </div>
  </main>
  <script src="js/nav.js"></script>
  <script src="js/vistaCrea.js"></script>
  <script src="js/paginacion.js"></script>
  <script src="js/miCuenta.js"></script>
  <script src="js/modificacionInv.js"></script>
  <script src="js/index.js" type="module"></script>
  <script src="js/jugarOnline.js"></script>
  <script src="js/hamburguer.js"></script>

  <script> 
    function eliminar(item_id) {
      // Crear instancia de XMLHttpRequest
      const xhr = new XMLHttpRequest();
      xhr.open('POST', `http://172.26.240.1:3001/lista_deseos/eliminar/${item_id}`, true);
      xhr.setRequestHeader('Content-Type', 'application/json');
      /* const url = process.env.WHIS_URL;
      if (!url) {
        console.error('La variable WHIS_URL no esta definida')
      }
      else {
      } */
    
      // Definir el callback para manejar la respuesta
      xhr.onload = function() {
        if (xhr.status >= 200 && xhr.status < 300) {
          // La solicitud fue exitosa
          alert('Se elimino correctamente');
          
          // Obtener el elemento que deseas eliminar
    const elementoAEliminar = document.getElementById('item-'+item_id);
    
    // Eliminar el elemento
    elementoAEliminar.remove();
    
        } else {
          // La solicitud falló
          alert('No se pudo eliminar correctamente');
        }
      };
    
      // Enviar la solicitud con los datos
      xhr.send();
    }
    </script>
</body>
</html>
